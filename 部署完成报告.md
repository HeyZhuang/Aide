# ğŸš€ PSD Canvas Jaaz éƒ¨ç½²å®ŒæˆæŠ¥å‘Š

## âœ… éƒ¨ç½²çŠ¶æ€

**éƒ¨ç½²æ—¶é—´**: 2025å¹´11æœˆ7æ—¥  
**æœåŠ¡å™¨IP**: 34.210.234.150  
**éƒ¨ç½²çŠ¶æ€**: âœ… æˆåŠŸ

---

## ğŸŒ è®¿é—®åœ°å€

### å…¬ç½‘è®¿é—®
- **ä¸»è®¿é—®åœ°å€**: http://34.210.234.150/
- **åç«¯API**: http://34.210.234.150/api/
- **WebSocket**: ws://34.210.234.150/socket.io/

### æœ¬åœ°è®¿é—®ï¼ˆæœåŠ¡å™¨å†…éƒ¨ï¼‰
- **å‰ç«¯æœåŠ¡**: http://127.0.0.1:3004
- **åç«¯æœåŠ¡**: http://127.0.0.1:57988
- **Nginxä»£ç†**: http://127.0.0.1:80

---

## ğŸ“Š æœåŠ¡çŠ¶æ€

### âœ… åç«¯æœåŠ¡ (psd-backend)
- **çŠ¶æ€**: è¿è¡Œä¸­
- **ç«¯å£**: 57988
- **ç›‘å¬åœ°å€**: 0.0.0.0:57988
- **è¿›ç¨‹**: Python (FastAPI + Uvicorn)
- **æ—¥å¿—**: `sudo journalctl -u psd-backend -f`

### âœ… å‰ç«¯æœåŠ¡ (psd-frontend)
- **çŠ¶æ€**: è¿è¡Œä¸­
- **ç«¯å£**: 3004
- **ç›‘å¬åœ°å€**: 0.0.0.0:3004
- **è¿›ç¨‹**: Node.js (Express)
- **æ—¥å¿—**: `sudo journalctl -u psd-frontend -f`

### âœ… Nginx åå‘ä»£ç†
- **çŠ¶æ€**: è¿è¡Œä¸­
- **ç«¯å£**: 80 (HTTP)
- **é…ç½®**: `/etc/nginx/sites-available/psd-canvas`
- **æ—¥å¿—**: `/var/log/nginx/psd-canvas-access.log`

---

## ğŸ”§ é…ç½®è¯¦æƒ…

### é¡¹ç›®è·¯å¾„
- **é¡¹ç›®æ ¹ç›®å½•**: `/home/ubuntu/psd-canvas-jaaz`
- **åç«¯ç›®å½•**: `/home/ubuntu/psd-canvas-jaaz/server`
- **å‰ç«¯ç›®å½•**: `/home/ubuntu/psd-canvas-jaaz/react`
- **è™šæ‹Ÿç¯å¢ƒ**: `/home/ubuntu/psd-canvas-jaaz/server/venv`

### ç«¯å£é…ç½®
- **Nginx**: 80 (HTTP)
- **å‰ç«¯æœåŠ¡**: 3004
- **åç«¯æœåŠ¡**: 57988

### é˜²ç«å¢™è§„åˆ™
å·²å¼€æ”¾ä»¥ä¸‹ç«¯å£ï¼š
- 80/tcp (HTTP)
- 443/tcp (HTTPSï¼Œé¢„ç•™)
- 3004/tcp (å‰ç«¯æœåŠ¡)
- 57988/tcp (åç«¯æœåŠ¡)

---

## ğŸ› ï¸ æœåŠ¡ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
sudo systemctl status psd-backend
sudo systemctl status psd-frontend
sudo systemctl status nginx
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯åç«¯
sudo systemctl restart psd-backend

# é‡å¯å‰ç«¯
sudo systemctl restart psd-frontend

# é‡å¯Nginx
sudo systemctl restart nginx
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# åç«¯æ—¥å¿—
sudo journalctl -u psd-backend -f

# å‰ç«¯æ—¥å¿—
sudo journalctl -u psd-frontend -f

# Nginxè®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/psd-canvas-access.log

# Nginxé”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/psd-canvas-error.log
```

### åœæ­¢æœåŠ¡
```bash
sudo systemctl stop psd-backend
sudo systemctl stop psd-frontend
sudo systemctl stop nginx
```

### å¯åŠ¨æœåŠ¡
```bash
sudo systemctl start psd-backend
sudo systemctl start psd-frontend
sudo systemctl start nginx
```

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²æµç¨‹

å½“éœ€è¦æ›´æ–°ä»£ç æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/ubuntu/psd-canvas-jaaz

# 2. æ‹‰å–æœ€æ–°ä»£ç ï¼ˆå¦‚æœä½¿ç”¨Gitï¼‰
# git pull

# 3. è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh

# 4. é‡å¯æœåŠ¡
sudo systemctl restart psd-backend
sudo systemctl restart psd-frontend

# 5. é‡æ–°åŠ è½½Nginxé…ç½®ï¼ˆå¦‚æœä¿®æ”¹äº†Nginxé…ç½®ï¼‰
sudo nginx -t  # æµ‹è¯•é…ç½®
sudo systemctl reload nginx
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### 1. æœåŠ¡æ— æ³•å¯åŠ¨

**æ£€æŸ¥æœåŠ¡çŠ¶æ€**:
```bash
sudo systemctl status psd-backend
sudo systemctl status psd-frontend
```

**æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**:
```bash
sudo journalctl -u psd-backend -n 50
sudo journalctl -u psd-frontend -n 50
```

### 2. ç«¯å£è¢«å ç”¨

**æ£€æŸ¥ç«¯å£å ç”¨**:
```bash
sudo netstat -tulpn | grep -E ':(80|3004|57988)'
sudo lsof -i :80
sudo lsof -i :3004
sudo lsof -i :57988
```

### 3. æ— æ³•è®¿é—®ç½‘ç«™

**æ£€æŸ¥é˜²ç«å¢™**:
```bash
sudo ufw status
```

**æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ**:
```bash
sudo systemctl status psd-backend psd-frontend nginx
```

**æµ‹è¯•æœ¬åœ°è¿æ¥**:
```bash
curl http://127.0.0.1:57988/api/config/exists
curl http://127.0.0.1:3004
curl http://127.0.0.1
```

### 4. Nginxé…ç½®é”™è¯¯

**æµ‹è¯•Nginxé…ç½®**:
```bash
sudo nginx -t
```

**æŸ¥çœ‹Nginxé”™è¯¯æ—¥å¿—**:
```bash
sudo tail -f /var/log/nginx/error.log
```

### 5. å‰ç«¯æ„å»ºå¤±è´¥

**æ‰‹åŠ¨æ„å»ºå‰ç«¯**:
```bash
cd /home/ubuntu/psd-canvas-jaaz/react
npm run build
```

**å¦‚æœTypeScripté”™è¯¯ï¼Œè·³è¿‡ç±»å‹æ£€æŸ¥**:
```bash
npx vite build --mode production
```

---

## ğŸ“ é‡è¦æ–‡ä»¶ä½ç½®

### é…ç½®æ–‡ä»¶
- **åç«¯ä¸»é…ç½®**: `/home/ubuntu/psd-canvas-jaaz/server/main.py`
- **Nginxé…ç½®**: `/etc/nginx/sites-available/psd-canvas`
- **SystemdæœåŠ¡**: 
  - `/etc/systemd/system/psd-backend.service`
  - `/etc/systemd/system/psd-frontend.service`

### æ—¥å¿—æ–‡ä»¶
- **åç«¯æ—¥å¿—**: `journalctl -u psd-backend`
- **å‰ç«¯æ—¥å¿—**: `journalctl -u psd-frontend`
- **Nginxè®¿é—®æ—¥å¿—**: `/var/log/nginx/psd-canvas-access.log`
- **Nginxé”™è¯¯æ—¥å¿—**: `/var/log/nginx/psd-canvas-error.log`

### æ„å»ºäº§ç‰©
- **å‰ç«¯æ„å»ºç›®å½•**: `/home/ubuntu/psd-canvas-jaaz/react/dist`
- **Pythonè™šæ‹Ÿç¯å¢ƒ**: `/home/ubuntu/psd-canvas-jaaz/server/venv`

---

## ğŸ” å®‰å…¨å»ºè®®

### 1. å¯ç”¨HTTPSï¼ˆæ¨èï¼‰

å½“å‰éƒ¨ç½²ä½¿ç”¨HTTPï¼Œå»ºè®®é…ç½®SSLè¯ä¹¦å¯ç”¨HTTPSï¼š

```bash
# ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### 2. é™åˆ¶CORSï¼ˆå¯é€‰ï¼‰

å½“å‰CORSè®¾ç½®ä¸ºå…è®¸æ‰€æœ‰æ¥æºï¼ˆ`allow_origins=["*"]`ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é™åˆ¶ä¸ºç‰¹å®šåŸŸåï¼š

```python
# server/main.py
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "https://your-domain.com",
        "https://www.your-domain.com",
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 3. é…ç½®é˜²ç«å¢™

ç¡®ä¿åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œå…³é—­ä¸å¿…è¦çš„æœåŠ¡ã€‚

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¯ç”¨Gzipå‹ç¼©

Nginxé…ç½®ä¸­å·²åŒ…å«å‹ç¼©è®¾ç½®ï¼Œç¡®ä¿å¯ç”¨ï¼š

```nginx
gzip on;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml;
```

### 2. é…ç½®ç¼“å­˜

é™æ€èµ„æºå·²é…ç½®ç¼“å­˜ç­–ç•¥ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´ã€‚

### 3. ç›‘æ§èµ„æºä½¿ç”¨

```bash
# æŸ¥çœ‹æœåŠ¡èµ„æºä½¿ç”¨
systemctl status psd-backend psd-frontend

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop
df -h
free -h
```

---

## âœ… éƒ¨ç½²éªŒè¯æ¸…å•

- [x] åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸
- [x] å‰ç«¯æœåŠ¡è¿è¡Œæ­£å¸¸
- [x] Nginxåå‘ä»£ç†é…ç½®æ­£ç¡®
- [x] é˜²ç«å¢™è§„åˆ™å·²é…ç½®
- [x] æœåŠ¡å·²è®¾ç½®å¼€æœºè‡ªå¯
- [x] å…¬ç½‘å¯ä»¥è®¿é—®
- [x] APIæ¥å£æ­£å¸¸å“åº”
- [x] WebSocketè¿æ¥æ­£å¸¸
- [x] é™æ€èµ„æºåŠ è½½æ­£å¸¸

---

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

é¡¹ç›®å·²æˆåŠŸéƒ¨ç½²ï¼Œå…¨å›½å„åœ°çš„ç”¨æˆ·ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

**http://34.210.234.150/**

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’æŸ¥éƒ¨åˆ†æˆ–æŸ¥çœ‹æœåŠ¡æ—¥å¿—ã€‚

---

*æœ€åæ›´æ–°: 2025å¹´11æœˆ7æ—¥*

