# éƒ¨ç½²è„šæœ¬ç›®å½•

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„éƒ¨ç½²å’Œå¯åŠ¨è„šæœ¬ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
docs/deployment/
â”œâ”€â”€ README.md                    # æœ¬æ–‡æ¡£
â”œâ”€â”€ DEPLOY.md                    # éƒ¨ç½²æŒ‡å—æ–‡æ¡£
â”œâ”€â”€ å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ start.sh                 # å¯åŠ¨æœåŠ¡è„šæœ¬
â”œâ”€â”€ éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh                # å®Œæ•´éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ redeploy.sh              # é‡æ–°éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ quick-deploy.sh          # å¿«é€Ÿéƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ quick-redeploy.sh        # å¿«é€Ÿé‡æ–°éƒ¨ç½²è„šæœ¬
â””â”€â”€ ç³»ç»Ÿé…ç½®
    â”œâ”€â”€ setup-https.sh           # é…ç½® HTTPS
    â””â”€â”€ setup-domain-ch-love.sh  # é…ç½® ch-love.online åŸŸå
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æœåŠ¡

```bash
bash docs/deployment/start.sh
```

### éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

#### é¦–æ¬¡éƒ¨ç½²
```bash
bash docs/deployment/deploy.sh
```

#### é‡æ–°éƒ¨ç½²ï¼ˆä¿ç•™æ•°æ®ï¼‰
```bash
bash docs/deployment/redeploy.sh
```

#### å¿«é€Ÿéƒ¨ç½²ï¼ˆè·³è¿‡æŸäº›æ£€æŸ¥ï¼‰
```bash
bash docs/deployment/quick-deploy.sh
```

## ğŸ“– è¯¦ç»†è¯´æ˜

### start.sh
å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ŒåŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ã€‚

**ç”¨æ³•**:
```bash
bash docs/deployment/start.sh
```

**åŠŸèƒ½**:
- å¯åŠ¨åç«¯ FastAPI æœåŠ¡å™¨ï¼ˆç«¯å£ 8000ï¼‰
- å¯åŠ¨å‰ç«¯ Vite å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 5173ï¼‰
- è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨

---

### deploy.sh
å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬ã€‚

**ç”¨æ³•**:
```bash
bash docs/deployment/deploy.sh
```

**åŠŸèƒ½**:
1. æ£€æŸ¥ç³»ç»Ÿä¾èµ–
2. å®‰è£… Python å’Œ Node.js ä¾èµ–
3. æ„å»ºå‰ç«¯é¡¹ç›®
4. é…ç½®æ•°æ®åº“
5. é…ç½® Nginxï¼ˆå¦‚æœéœ€è¦ï¼‰
6. å¯åŠ¨æœåŠ¡

**ç¯å¢ƒå˜é‡**:
- `PORT`: åç«¯ç«¯å£ï¼ˆé»˜è®¤ 8000ï¼‰
- `NODE_ENV`: ç¯å¢ƒæ¨¡å¼ï¼ˆproduction/developmentï¼‰

---

### redeploy.sh
é‡æ–°éƒ¨ç½²è„šæœ¬ï¼Œä¿ç•™ç°æœ‰æ•°æ®å’Œé…ç½®ã€‚

**ç”¨æ³•**:
```bash
bash docs/deployment/redeploy.sh
```

**åŠŸèƒ½**:
1. åœæ­¢ç°æœ‰æœåŠ¡
2. æ‹‰å–æœ€æ–°ä»£ç 
3. æ›´æ–°ä¾èµ–
4. é‡æ–°æ„å»º
5. é‡å¯æœåŠ¡

**æ³¨æ„**: ä¸ä¼šé‡ç½®æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶

---

### quick-deploy.sh
å¿«é€Ÿéƒ¨ç½²è„šæœ¬ï¼Œè·³è¿‡æŸäº›æ£€æŸ¥æ­¥éª¤ã€‚

**ç”¨æ³•**:
```bash
bash docs/deployment/quick-deploy.sh
```

**é€‚ç”¨åœºæ™¯**:
- å°æ”¹åŠ¨å¿«é€Ÿéƒ¨ç½²
- å¼€å‘ç¯å¢ƒå¿«é€Ÿæ›´æ–°
- CI/CD æµç¨‹

---

### quick-redeploy.sh
å¿«é€Ÿé‡æ–°éƒ¨ç½²è„šæœ¬ã€‚

**ç”¨æ³•**:
```bash
bash docs/deployment/quick-redeploy.sh
```

**åŠŸèƒ½**:
- å¿«é€Ÿåœæ­¢æœåŠ¡
- æ‹‰å–ä»£ç 
- é‡å¯æœåŠ¡

---

### setup-https.sh
é…ç½® HTTPS è¯ä¹¦å’Œ SSLã€‚

**ç”¨æ³•**:
```bash
sudo bash docs/deployment/setup-https.sh
```

**åŠŸèƒ½**:
1. å®‰è£… Certbot
2. ç”³è¯· Let's Encrypt è¯ä¹¦
3. é…ç½® Nginx SSL
4. è®¾ç½®è‡ªåŠ¨ç»­æœŸ

**å‰ç½®æ¡ä»¶**:
- æ‹¥æœ‰åŸŸå
- DNS å·²æ­£ç¡®é…ç½®
- æœåŠ¡å™¨å¼€æ”¾ 80 å’Œ 443 ç«¯å£

---

### setup-domain-ch-love.sh
é…ç½® ch-love.online åŸŸåçš„ç‰¹å®šè„šæœ¬ã€‚

**ç”¨æ³•**:
```bash
sudo bash docs/deployment/setup-domain-ch-love.sh
```

**åŠŸèƒ½**:
1. é…ç½®åŸŸå DNS
2. è®¾ç½® Nginx è™šæ‹Ÿä¸»æœº
3. ç”³è¯· SSL è¯ä¹¦
4. é…ç½®åå‘ä»£ç†

---

## ğŸ”§ å¸¸è§ä»»åŠ¡

### æ›´æ–°ä»£ç å¹¶é‡å¯

```bash
git pull
bash docs/deployment/quick-redeploy.sh
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# åç«¯æœåŠ¡
curl http://localhost:8000/api/health

# å‰ç«¯æœåŠ¡
curl http://localhost:5173
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# åç«¯æ—¥å¿—
tail -f server/logs/app.log

# Nginx æ—¥å¿—
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯åç«¯
pkill -f "python.*main.py"
bash docs/deployment/start.sh

# é‡å¯ Nginx
sudo systemctl restart nginx
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **å¤‡ä»½æ•°æ®**: éƒ¨ç½²å‰åŠ¡å¿…å¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶
2. **æµ‹è¯•ç¯å¢ƒ**: å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
3. **ç¯å¢ƒå˜é‡**: ç¡®ä¿æ‰€æœ‰ç¯å¢ƒå˜é‡æ­£ç¡®é…ç½®
4. **æƒé™**: æŸäº›è„šæœ¬éœ€è¦ sudo æƒé™
5. **é˜²ç«å¢™**: ç¡®ä¿å¿…è¦ç«¯å£å·²å¼€æ”¾

### è„šæœ¬æƒé™

éƒ¨ç½²è„šæœ¬éœ€è¦å¯æ‰§è¡Œæƒé™ï¼š

```bash
chmod +x docs/deployment/*.sh
```

### åŸŸåé…ç½®

ä¿®æ”¹åŸŸåæ—¶éœ€è¦æ›´æ–°ï¼š
1. Nginx é…ç½®æ–‡ä»¶
2. ç¯å¢ƒå˜é‡ä¸­çš„ `BASE_URL`
3. SSL è¯ä¹¦
4. DNS è®°å½•

---

## ğŸ› æ•…éšœæ’é™¤

### éƒ¨ç½²å¤±è´¥

**é—®é¢˜**: éƒ¨ç½²è„šæœ¬æ‰§è¡Œå¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥æ—¥å¿—è¾“å‡º
2. éªŒè¯ä¾èµ–æ˜¯å¦å®‰è£…
3. æ£€æŸ¥æƒé™é—®é¢˜
4. æŸ¥çœ‹ç£ç›˜ç©ºé—´

### æœåŠ¡æ— æ³•å¯åŠ¨

**é—®é¢˜**: æœåŠ¡å¯åŠ¨åç«‹å³é€€å‡º

**è§£å†³**:
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
3. éªŒè¯é…ç½®æ–‡ä»¶æ ¼å¼
4. æ£€æŸ¥æ•°æ®åº“è¿æ¥

### SSL è¯ä¹¦é—®é¢˜

**é—®é¢˜**: HTTPS è¯ä¹¦ç”³è¯·å¤±è´¥

**è§£å†³**:
1. éªŒè¯åŸŸå DNS é…ç½®
2. æ£€æŸ¥é˜²ç«å¢™ 80/443 ç«¯å£
3. ç¡®è®¤åŸŸåå·²ç”Ÿæ•ˆ
4. æŸ¥çœ‹ Certbot æ—¥å¿—

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [DEPLOY.md](./DEPLOY.md) - è¯¦ç»†éƒ¨ç½²æŒ‡å—
- [../scripts/README.md](../scripts/README.md) - å·¥å…·è„šæœ¬è¯´æ˜
- [é¡¹ç›®ä¸» README](../../README.md) - é¡¹ç›®æ¦‚è¿°

---

**æœ€åæ›´æ–°**: 2025-11-13
