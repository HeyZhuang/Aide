# ğŸ¯ Jaaz é¡¹ç›®è§„åˆ’ä¸è·¯çº¿å›¾

> **æ›´æ–°æ—¶é—´**: 2025-11-13
> **å½“å‰ç‰ˆæœ¬**: v1.0.30
> **è§„åˆ’å‘¨æœŸ**: 2025-11 ~ 2026-03 (6 ä¸ªæœˆ)

---

## ğŸ“‹ æ€»ä½“ç›®æ ‡

### çŸ­æœŸç›®æ ‡ (1 ä¸ªæœˆå†…)
1. **ä¿®å¤æ ¸å¿ƒ Bug** - æ¨¡æ¿åŠŸèƒ½æ¢å¤ã€ç«æ€æ¡ä»¶ä¿®å¤
2. **æå‡ç¨³å®šæ€§** - é”™è¯¯å¤„ç†ä¼˜åŒ–ã€æ—¥å¿—æ¸…ç†
3. **å®Œå–„æ–‡æ¡£** - API æ–‡æ¡£ã€å¼€å‘æŒ‡å—

### ä¸­æœŸç›®æ ‡ (3 ä¸ªæœˆå†…)
1. **è§†é¢‘ç¼–è¾‘å™¨** - å®Œæ•´çš„è§†é¢‘å‰ªè¾‘åŠŸèƒ½
2. **åä½œç¼–è¾‘** - å¤šäººå®æ—¶åä½œ
3. **æ€§èƒ½ä¼˜åŒ–** - å¤§ç”»å¸ƒå¡é¡¿ä¼˜åŒ–

### é•¿æœŸç›®æ ‡ (6 ä¸ªæœˆå†…)
1. **æ’ä»¶ç³»ç»Ÿ** - ç¬¬ä¸‰æ–¹æ‰©å±•æ”¯æŒ
2. **ç§»åŠ¨ç«¯é€‚é…** - iPad / Android å¹³æ¿æ”¯æŒ
3. **ä¼ä¸šç‰ˆåŠŸèƒ½** - SSOã€å®¡è®¡æ—¥å¿—ã€ç§æœ‰éƒ¨ç½²

---

## ğŸš€ è¯¦ç»†è·¯çº¿å›¾

### Phase 1: ç¨³å®šæ€§æå‡ (2025-11-14 ~ 2025-11-20)

**ç‰ˆæœ¬**: v1.0.31

#### ğŸ¯ æ ¸å¿ƒç›®æ ‡
ä¿®å¤å·²çŸ¥ Bugï¼Œæå‡ç³»ç»Ÿç¨³å®šæ€§ï¼Œå®Œå–„åŸºç¡€åŠŸèƒ½ã€‚

---

#### ğŸ“Œ ä»»åŠ¡æ¸…å•

##### 1.1 æ¨¡æ¿åŠŸèƒ½ä¿®å¤ (ä¼˜å…ˆçº§: P0)

**å½“å‰çŠ¶æ€**: ä¸´æ—¶ç¦ç”¨ï¼Œå‰ç«¯ UI å®Œæ•´ä½†åç«¯æ•°æ®åº“è¡¨ç¼ºå¤±

**å®æ–½æ­¥éª¤**:

**æ­¥éª¤ 1**: åˆ›å»ºæ•°æ®åº“è¿ç§»æ–‡ä»¶
```bash
# åˆ›å»ºæ–‡ä»¶: server/services/migrations/v8_create_templates_table.py
```

**è¿ç§»ä»£ç **:
```python
from . import Migration

class V8CreateTemplatesTable(Migration):
    def up(self, cursor):
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS templates (
                id TEXT PRIMARY KEY,
                name TEXT NOT NULL,
                description TEXT,
                file_path TEXT NOT NULL,
                file_type TEXT NOT NULL,  -- psd, json, png, jpg, svg
                file_size INTEGER,
                thumbnail_path TEXT,
                category TEXT,
                tags TEXT,  -- JSON æ•°ç»„å­—ç¬¦ä¸²
                created_by TEXT NOT NULL,
                created_at TEXT NOT NULL,
                updated_at TEXT NOT NULL,
                FOREIGN KEY (created_by) REFERENCES users(id)
            )
        ''')

        # åˆ›å»ºç´¢å¼•
        cursor.execute('CREATE INDEX idx_templates_category ON templates(category)')
        cursor.execute('CREATE INDEX idx_templates_created_by ON templates(created_by)')

    def down(self, cursor):
        cursor.execute('DROP TABLE IF EXISTS templates')
```

**æ­¥éª¤ 2**: æ›´æ–°è¿ç§»ç®¡ç†å™¨
```python
# server/services/migrations/manager.py
from services.migrations.v8_create_templates_table import V8CreateTemplatesTable

CURRENT_VERSION = 8

ALL_MIGRATIONS = [
    # ... v1-v7
    {
        'version': 8,
        'migration': V8CreateTemplatesTable,
    },
]
```

**æ­¥éª¤ 3**: æ¢å¤ template_router.py åŠŸèƒ½
```python
# å–æ¶ˆæ‰€æœ‰ return [] å’Œ raise HTTPException(503) çš„ä¸´æ—¶ä»£ç 
# æ¢å¤æ­£å¸¸çš„æ•°æ®åº“æŸ¥è¯¢é€»è¾‘
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ•°æ®åº“è¿ç§»æˆåŠŸæ‰§è¡Œ
- âœ… å‰ç«¯æ¨¡æ¿åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- âœ… åˆ›å»º/ç¼–è¾‘/åˆ é™¤æ¨¡æ¿åŠŸèƒ½æ­£å¸¸
- âœ… æƒé™æ§åˆ¶æ­£å¸¸ (æ¸¸å®¢åªèƒ½æŸ¥çœ‹ï¼Œç”¨æˆ·å¯ä¸‹è½½)

**é¢„è®¡å·¥ä½œé‡**: 4 å°æ—¶

---

##### 1.2 å·¥å…·æœåŠ¡ç«æ€æ¡ä»¶ä¿®å¤ (ä¼˜å…ˆçº§: P0)

**é—®é¢˜æè¿°**:
```python
# server/services/tool_service.py:228
# TODO: Check if there will be racing conditions when server just
# starting up but tools are not ready yet.
```

**å®æ–½æ–¹æ¡ˆ**:

**æ–¹æ¡ˆ 1**: æ·»åŠ åˆå§‹åŒ–æ ‡å¿— (æ¨è)
```python
# server/services/tool_service.py
import asyncio

class ToolService:
    def __init__(self):
        self._initialized = asyncio.Event()
        self._tools = []

    async def initialize(self):
        """åˆå§‹åŒ–æ‰€æœ‰å·¥å…·"""
        # ... åŠ è½½å·¥å…·é€»è¾‘
        self._initialized.set()
        print("âœ… å·¥å…·æœåŠ¡åˆå§‹åŒ–å®Œæˆ")

    async def wait_ready(self):
        """ç­‰å¾…å·¥å…·æœåŠ¡å°±ç»ª"""
        await self._initialized.wait()

    async def get_tools(self):
        await self.wait_ready()
        return self._tools
```

**æ–¹æ¡ˆ 2**: åœ¨ main.py å¯åŠ¨æ—¶åˆå§‹åŒ–
```python
# server/main.py
from services.tool_service import tool_service

@app.on_event("startup")
async def startup_event():
    print("ğŸ”„ åˆå§‹åŒ–å·¥å…·æœåŠ¡...")
    await tool_service.initialize()
    print("âœ… æœåŠ¡å™¨å¯åŠ¨å®Œæˆ")
```

**æ–¹æ¡ˆ 3**: åœ¨ chat_router ä¸­æ·»åŠ ç­‰å¾…é€»è¾‘
```python
# server/routers/chat_router.py
@router.post("/api/chat")
async def handle_chat(data: dict):
    # ç­‰å¾…å·¥å…·æœåŠ¡å°±ç»ª
    await tool_service.wait_ready()

    # æ­£å¸¸å¤„ç†èŠå¤©è¯·æ±‚
    tool_list = await tool_service.get_tools()
    # ...
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æœåŠ¡å¯åŠ¨åç«‹å³å‘é€èŠå¤©è¯·æ±‚ä¸å´©æºƒ
- âœ… å¹¶å‘ 100 ä¸ªè¯·æ±‚æ—¶ç³»ç»Ÿç¨³å®š
- âœ… æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–ç«æ€æ¡ä»¶

**é¢„è®¡å·¥ä½œé‡**: 3 å°æ—¶

---

##### 1.3 WebSocket æ¶ˆæ¯éš”ç¦» (ä¼˜å…ˆçº§: P1)

**é—®é¢˜æè¿°**:
```python
# server/services/websocket_service.py:22
# TODO: All Broadcast should have a canvas_id
```

**å½“å‰é—®é¢˜**: æ‰€æœ‰ç”¨æˆ·æ”¶åˆ°ç›¸åŒçš„ WebSocket æ¶ˆæ¯ï¼Œå¯¼è‡´æ¶ˆæ¯ä¸²æµ

**å®æ–½æ–¹æ¡ˆ**:

**æ­¥éª¤ 1**: æ·»åŠ ç”»å¸ƒè®¢é˜…æœºåˆ¶
```python
# server/services/websocket_service.py
class WebSocketService:
    def __init__(self):
        self.canvas_subscriptions = {}  # {canvas_id: [sid1, sid2, ...]}

    async def subscribe_canvas(self, sid: str, canvas_id: str):
        """ç”¨æˆ·è®¢é˜…ç”»å¸ƒ"""
        if canvas_id not in self.canvas_subscriptions:
            self.canvas_subscriptions[canvas_id] = []
        self.canvas_subscriptions[canvas_id].append(sid)

    async def unsubscribe_canvas(self, sid: str, canvas_id: str):
        """ç”¨æˆ·å–æ¶ˆè®¢é˜…ç”»å¸ƒ"""
        if canvas_id in self.canvas_subscriptions:
            self.canvas_subscriptions[canvas_id].remove(sid)

    async def broadcast_to_canvas(self, canvas_id: str, message: dict):
        """å‘è®¢é˜…è¯¥ç”»å¸ƒçš„æ‰€æœ‰ç”¨æˆ·å¹¿æ’­æ¶ˆæ¯"""
        sids = self.canvas_subscriptions.get(canvas_id, [])
        for sid in sids:
            await sio.emit('message', message, room=sid)
```

**æ­¥éª¤ 2**: å‰ç«¯è®¢é˜…ç”»å¸ƒ
```typescript
// react/src/contexts/socket.tsx
useEffect(() => {
  if (canvasId && socket) {
    socket.emit('subscribe_canvas', { canvas_id: canvasId })

    return () => {
      socket.emit('unsubscribe_canvas', { canvas_id: canvasId })
    }
  }
}, [canvasId, socket])
```

**æ­¥éª¤ 3**: æ›´æ–°æ‰€æœ‰å¹¿æ’­è°ƒç”¨
```python
# ä¹‹å‰
await websocket_service.broadcast({'type': 'image_generated', ...})

# ä¹‹å
await websocket_service.broadcast_to_canvas(canvas_id, {
    'type': 'image_generated',
    ...
})
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç”¨æˆ· A åœ¨ç”»å¸ƒ 1 ç”Ÿæˆå›¾ç‰‡ï¼Œç”¨æˆ· B åœ¨ç”»å¸ƒ 2 ä¸ä¼šæ”¶åˆ°æ¶ˆæ¯
- âœ… å¤šç”¨æˆ·åŒæ—¶ç¼–è¾‘ä¸åŒç”»å¸ƒï¼Œæ¶ˆæ¯äº’ä¸å¹²æ‰°
- âœ… ç”¨æˆ·åˆ·æ–°é¡µé¢åè‡ªåŠ¨é‡æ–°è®¢é˜…

**é¢„è®¡å·¥ä½œé‡**: 6 å°æ—¶

---

##### 1.4 Gemini Token é™åˆ¶ä¿®å¤ (ä¼˜å…ˆçº§: P1)

**é—®é¢˜æè¿°**:
```python
# server/services/langgraph_service/agent_service.py:173
# TODO: Verify if max_tokens is working
# max_tokens=max_tokens,  # æš‚æ—¶æ³¨é‡Šæ‰æœ‰é—®é¢˜çš„å‚æ•°
```

**å®æ–½æ–¹æ¡ˆ**:

**æ­¥éª¤ 1**: éªŒè¯ Gemini API å‚æ•°
```python
from langchain_google_genai import ChatGoogleGenerativeAI

# æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆ
model = ChatGoogleGenerativeAI(
    model="gemini-2.5-flash",
    google_api_key="xxx",
    max_output_tokens=1024,  # ä½¿ç”¨æ­£ç¡®çš„å‚æ•°å
    temperature=0,
)
```

**æ­¥éª¤ 2**: æŸ¥é˜…å®˜æ–¹æ–‡æ¡£
- Google Gemini API æ–‡æ¡£: `max_output_tokens` vs `max_tokens`
- LangChain é›†æˆæ–‡æ¡£: å‚æ•°æ˜ å°„å…³ç³»

**æ­¥éª¤ 3**: æ·»åŠ æµ‹è¯•ç”¨ä¾‹
```python
# tests/test_gemini_token_limit.py
async def test_gemini_respects_max_tokens():
    response = await agent_service.call_gemini(
        prompt="ç”Ÿæˆä¸€ç¯‡æ–‡ç« ",
        max_output_tokens=100
    )
    assert len(response.split()) <= 100  # éªŒè¯è¾“å‡ºé•¿åº¦
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… `max_output_tokens` å‚æ•°ç”Ÿæ•ˆ
- âœ… è¾“å‡ºé•¿åº¦ç¬¦åˆé¢„æœŸ
- âœ… ä¸å½±å“å›¾åƒç”ŸæˆåŠŸèƒ½

**é¢„è®¡å·¥ä½œé‡**: 2 å°æ—¶

---

##### 1.5 æµ‹è¯•ä½™é¢æ¢å¤ (ä¼˜å…ˆçº§: P1)

**é—®é¢˜æè¿°**:
```typescript
// react/src/hooks/use-balance.ts
// ä¸´æ—¶ä¿®æ”¹ï¼šæµ‹è¯•æ¨¡å‹ç”Ÿæˆæ—¶è¿”å›å¤§ä½™é¢ï¼Œé¿å…ç§¯åˆ†ä¸è¶³æç¤º
return { balance: 999.00 }
```

**å®æ–½æ–¹æ¡ˆ**:

**æ­¥éª¤ 1**: æ¢å¤çœŸå®ä½™é¢æŸ¥è¯¢
```typescript
// react/src/hooks/use-balance.ts
export function useBalance() {
  const { data } = useQuery({
    queryKey: ['balance'],
    queryFn: async () => {
      const response = await fetch('/api/user/balance')
      return response.json()
    }
  })

  return { balance: data?.balance ?? 0 }  // æ¢å¤çœŸå®æŸ¥è¯¢
}
```

**æ­¥éª¤ 2**: åç«¯å®ç°ä½™é¢æ¥å£
```python
# server/routers/user_router.py
@router.get("/api/user/balance")
async def get_user_balance(current_user: dict = Depends(get_current_user)):
    user_id = current_user['id']
    balance = await db_service.get_user_balance(user_id)
    return {"balance": balance}
```

**æ­¥éª¤ 3**: æ•°æ®åº“æŸ¥è¯¢
```python
# server/services/db_service.py
async def get_user_balance(self, user_id: str) -> float:
    async with aiosqlite.connect(self.db_path) as db:
        cursor = await db.execute(
            "SELECT balance FROM users WHERE id = ?",
            (user_id,)
        )
        row = await cursor.fetchone()
        return row[0] if row else 0.0
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å‰ç«¯æ˜¾ç¤ºçœŸå®ä½™é¢
- âœ… ä½™é¢ä¸è¶³æ—¶æ˜¾ç¤ºå……å€¼æç¤º
- âœ… ç”Ÿæˆå›¾ç‰‡/è§†é¢‘åä½™é¢æ­£ç¡®æ‰£å‡

**é¢„è®¡å·¥ä½œé‡**: 3 å°æ—¶

---

##### 1.6 è°ƒè¯•æ—¥å¿—æ¸…ç† (ä¼˜å…ˆçº§: P2)

**é—®é¢˜æè¿°**: ä»£ç ä¸­æœ‰ 50+ å¤„è°ƒè¯•æ—¥å¿—

**å®æ–½æ–¹æ¡ˆ**:

**æ­¥éª¤ 1**: å…¨å±€æœç´¢è°ƒè¯•æ—¥å¿—
```bash
# Python åç«¯
grep -rn "logger.debug" server/ > debug_logs.txt

# TypeScript å‰ç«¯
grep -rn "console.debug" react/src/ >> debug_logs.txt
```

**æ­¥éª¤ 2**: åˆ†ç±»å¤„ç†
- **ä¿ç•™**: å…³é”®æµç¨‹æ—¥å¿— (å¯åŠ¨/å…³é—­/é”™è¯¯)
- **é™çº§**: è¯¦ç»†æ—¥å¿—æ”¹ä¸º `logger.trace` (ç”Ÿäº§ç¯å¢ƒä¸è¾“å‡º)
- **åˆ é™¤**: ä¸´æ—¶è°ƒè¯•æ—¥å¿—

**æ­¥éª¤ 3**: æ·»åŠ æ—¥å¿—çº§åˆ«é…ç½®
```python
# server/utils/logger.py
import os

LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")  # ç”Ÿäº§ç¯å¢ƒé»˜è®¤ INFO

logger.setLevel(LOG_LEVEL)
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç”Ÿäº§ç¯å¢ƒæ—¥å¿—é‡å‡å°‘ 80%
- âœ… å…³é”®é”™è¯¯æ—¥å¿—ä¿ç•™
- âœ… æ—¥å¿—çº§åˆ«å¯é…ç½®

**é¢„è®¡å·¥ä½œé‡**: 4 å°æ—¶

---

#### ğŸ“Š Phase 1 æ€»ç»“

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|--------|--------|--------|------|
| æ¨¡æ¿åŠŸèƒ½ä¿®å¤ | P0 | 4h | åç«¯ | ğŸ“‹ å¾…å¼€å§‹ |
| ç«æ€æ¡ä»¶ä¿®å¤ | P0 | 3h | åç«¯ | ğŸ“‹ å¾…å¼€å§‹ |
| WebSocket éš”ç¦» | P1 | 6h | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |
| Token é™åˆ¶ä¿®å¤ | P1 | 2h | åç«¯ | ğŸ“‹ å¾…å¼€å§‹ |
| æµ‹è¯•ä½™é¢æ¢å¤ | P1 | 3h | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |
| æ—¥å¿—æ¸…ç† | P2 | 4h | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |

**æ€»å·¥ä½œé‡**: 22 å°æ—¶ (çº¦ 3 ä¸ªå·¥ä½œæ—¥)

**é¢„æœŸå‘å¸ƒæ—¥æœŸ**: 2025-11-20

---

### Phase 2: åŠŸèƒ½å®Œå–„ (2025-11-21 ~ 2025-12-20)

**ç‰ˆæœ¬**: v1.1.0

#### ğŸ¯ æ ¸å¿ƒç›®æ ‡
å®Œå–„è§†é¢‘ç¼–è¾‘å™¨ã€æ™ºèƒ½æ’ç‰ˆã€å­—ä½“ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

---

#### ğŸ“Œ ä»»åŠ¡æ¸…å•

##### 2.1 è§†é¢‘ç¼–è¾‘å™¨ (ä¼˜å…ˆçº§: P0)

**å½“å‰çŠ¶æ€**: ä»…æ”¯æŒåµŒå…¥è§†é¢‘å…ƒç´ åˆ°ç”»å¸ƒ

**ç›®æ ‡**: å®Œæ•´çš„è§†é¢‘å‰ªè¾‘åŠŸèƒ½

**åŠŸèƒ½éœ€æ±‚**:

1. **æ—¶é—´è½´ç¼–è¾‘**
   - è§†é¢‘ç‰‡æ®µæ‹–æ‹½æ’åº
   - æ—¶é—´è½´ç¼©æ”¾ (1x, 2x, 5x)
   - æ—¶é—´æ ‡è®°å’Œè·³è½¬

2. **è§†é¢‘å‰ªè¾‘**
   - ç‰‡æ®µè£å‰ª (å¼€å§‹/ç»“æŸæ—¶é—´)
   - åˆ†å‰²è§†é¢‘
   - åˆ é™¤ç‰‡æ®µ

3. **è½¬åœºæ•ˆæœ**
   - æ·¡å…¥æ·¡å‡º
   - åˆ‡æ¢åŠ¨ç”» (æ»‘åŠ¨/ç¼©æ”¾/æ—‹è½¬)
   - è‡ªå®šä¹‰è½¬åœºæ—¶é•¿

4. **éŸ³é¢‘è½¨é“**
   - èƒŒæ™¯éŸ³ä¹æ·»åŠ 
   - éŸ³é‡è°ƒèŠ‚
   - éŸ³é¢‘æ·¡å…¥æ·¡å‡º

5. **å­—å¹•æ”¯æŒ**
   - SRT å­—å¹•å¯¼å…¥
   - æ‰‹åŠ¨æ·»åŠ å­—å¹•
   - å­—å¹•æ ·å¼ç¼–è¾‘ (å­—ä½“/é¢œè‰²/ä½ç½®)

**æŠ€æœ¯æ–¹æ¡ˆ**:

**æ–¹æ¡ˆ 1**: FFmpeg.js (æ¨è)
```typescript
// ä¼˜ç‚¹: åŠŸèƒ½å¼ºå¤§,æ”¯æŒæ‰€æœ‰è§†é¢‘æ ¼å¼
// ç¼ºç‚¹: æ–‡ä»¶ä½“ç§¯å¤§ (~30MB)
import { createFFmpeg } from '@ffmpeg/ffmpeg'

const ffmpeg = createFFmpeg({ log: true })
await ffmpeg.load()

// è£å‰ªè§†é¢‘
await ffmpeg.run(
  '-i', 'input.mp4',
  '-ss', '00:00:10',  // å¼€å§‹æ—¶é—´
  '-t', '00:00:20',   // æŒç»­æ—¶é—´
  'output.mp4'
)
```

**æ–¹æ¡ˆ 2**: Video.js + è‡ªå®šä¹‰æ’­æ”¾å™¨
```typescript
// ä¼˜ç‚¹: è½»é‡çº§,UI å¯å®šåˆ¶
// ç¼ºç‚¹: åŠŸèƒ½æœ‰é™,éœ€è¦åç«¯å¤„ç†è§†é¢‘
import videojs from 'video.js'

const player = videojs('my-video', {
  controls: true,
  plugins: {
    timeline: {},
    trimmer: {},
  }
})
```

**å‰ç«¯ç»„ä»¶**:
```
react/src/components/video-editor/
â”œâ”€â”€ VideoTimeline.tsx         # æ—¶é—´è½´
â”œâ”€â”€ VideoPlayer.tsx           # æ’­æ”¾å™¨
â”œâ”€â”€ VideoTrimmer.tsx          # è£å‰ªå·¥å…·
â”œâ”€â”€ VideoTransitions.tsx      # è½¬åœºæ•ˆæœ
â”œâ”€â”€ AudioTrack.tsx            # éŸ³é¢‘è½¨é“
â””â”€â”€ SubtitleEditor.tsx        # å­—å¹•ç¼–è¾‘å™¨
```

**åç«¯ API**:
```python
# server/routers/video_router.py
@router.post("/api/video/trim")
async def trim_video(
    file: UploadFile,
    start_time: float,
    end_time: float
):
    # è°ƒç”¨ FFmpeg è£å‰ªè§†é¢‘
    output_path = await video_service.trim(file, start_time, end_time)
    return {"path": output_path}

@router.post("/api/video/merge")
async def merge_videos(clips: List[str], transitions: List[str]):
    # åˆå¹¶å¤šä¸ªè§†é¢‘ç‰‡æ®µ,æ·»åŠ è½¬åœºæ•ˆæœ
    output_path = await video_service.merge(clips, transitions)
    return {"path": output_path}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯¼å…¥è§†é¢‘å¹¶åœ¨æ—¶é—´è½´æ˜¾ç¤º
- âœ… è£å‰ªã€åˆ†å‰²ã€åˆ é™¤è§†é¢‘ç‰‡æ®µ
- âœ… æ·»åŠ è‡³å°‘ 3 ç§è½¬åœºæ•ˆæœ
- âœ… æ·»åŠ èƒŒæ™¯éŸ³ä¹å¹¶è°ƒèŠ‚éŸ³é‡
- âœ… å¯¼å…¥ SRT å­—å¹•å¹¶ç¼–è¾‘æ ·å¼
- âœ… å¯¼å‡ºæœ€ç»ˆè§†é¢‘æ–‡ä»¶

**é¢„è®¡å·¥ä½œé‡**: 40 å°æ—¶ (2 å‘¨)

---

##### 2.2 æ™ºèƒ½æ’ç‰ˆä¼˜åŒ– (ä¼˜å…ˆçº§: P1)

**å½“å‰çŠ¶æ€**: Gemini Vision API é›†æˆï¼Œæ’ç‰ˆæ•ˆæœä¸ç¨³å®š

**ç›®æ ‡**: æå‡æ’ç‰ˆç®—æ³•å‡†ç¡®æ€§å’Œç¾è§‚åº¦

**ä¼˜åŒ–æ–¹å‘**:

1. **å¯¹é½ç®—æ³•ä¼˜åŒ–**
   - æ”¯æŒå·¦/å³/å±…ä¸­/ä¸Š/ä¸‹/å‚ç›´å±…ä¸­å¯¹é½
   - å¤šå¯¹è±¡åŒæ—¶å¯¹é½
   - å‚è€ƒçº¿è¾…åŠ©

2. **é—´è·è‡ªåŠ¨è°ƒæ•´**
   - ç­‰é—´è·åˆ†å¸ƒ
   - é»„é‡‘æ¯”ä¾‹å¸ƒå±€
   - ç½‘æ ¼å¸é™„

3. **å“åº”å¼å¸ƒå±€**
   - æ ¹æ®ç”»å¸ƒå°ºå¯¸è‡ªåŠ¨è°ƒæ•´
   - æ”¯æŒä¸åŒå®½é«˜æ¯” (16:9, 9:16, 1:1)

**æŠ€æœ¯æ–¹æ¡ˆ**:

**Prompt ä¼˜åŒ–**:
```python
# server/services/canvas_layer_arrangement_service.py
IMPROVED_PROMPT = """
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¹³é¢è®¾è®¡å¸ˆã€‚è¯·åˆ†æç”»å¸ƒä¸­çš„æ‰€æœ‰å…ƒç´ ,å¹¶ç»™å‡ºæ’ç‰ˆå»ºè®®ã€‚

è¦æ±‚:
1. å¯¹é½: ä½¿ç”¨å·¦/å³/å±…ä¸­/é¡¶éƒ¨/åº•éƒ¨å¯¹é½,ä¿æŒè§†è§‰æ•´æ´
2. é—´è·: å…ƒç´ é—´è·ä¿æŒä¸€è‡´,ä½¿ç”¨ 8px çš„å€æ•°
3. å±‚æ¬¡: ä¸»è¦å…ƒç´ çªå‡º,æ¬¡è¦å…ƒç´ å¼±åŒ–
4. å¹³è¡¡: å·¦å³å¹³è¡¡,é¿å…ä¸€ä¾§è¿‡äºæ‹¥æŒ¤
5. ç•™ç™½: ä¿ç•™é€‚å½“çš„è¾¹è·,é¿å…å…ƒç´ è´´è¾¹

å½“å‰ç”»å¸ƒå°ºå¯¸: {width}x{height}
å…ƒç´ åˆ—è¡¨:
{elements_json}

è¯·è¿”å› JSON æ ¼å¼çš„è°ƒæ•´å»ºè®®:
{{
  "adjustments": [
    {{"id": "å…ƒç´ ID", "x": æ–°xåæ ‡, "y": æ–°yåæ ‡, "reason": "è°ƒæ•´åŸå› "}}
  ]
}}
"""
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯¹é½å‡†ç¡®ç‡ > 90%
- âœ… é—´è·ä¸€è‡´æ€§ > 85%
- âœ… ç”¨æˆ·æ»¡æ„åº¦è°ƒæŸ¥ > 4.0/5.0

**é¢„è®¡å·¥ä½œé‡**: 16 å°æ—¶ (2 å¤©)

---

##### 2.3 å­—ä½“ç®¡ç†å®Œå–„ (ä¼˜å…ˆçº§: P1)

**å½“å‰çŠ¶æ€**: åŸºç¡€åŠŸèƒ½å¯ç”¨ï¼Œé«˜çº§åŠŸèƒ½ç¼ºå¤±

**ç›®æ ‡**: ä¼ä¸šçº§å­—ä½“ç®¡ç†ç³»ç»Ÿ

**æ–°å¢åŠŸèƒ½**:

1. **å­—ä½“åˆ†ç±»ç®¡ç†**
   - ç³»ç»Ÿå­—ä½“ / è‡ªå®šä¹‰å­—ä½“
   - åˆ†ç±»æ ‡ç­¾ (è¡¬çº¿/æ— è¡¬çº¿/æ‰‹å†™/è£…é¥°)
   - æ”¶è—å¤¹

2. **Google Fonts é›†æˆ**
   - åœ¨çº¿å­—ä½“åº“æµè§ˆ
   - ä¸€é”®å®‰è£…å­—ä½“
   - è‡ªåŠ¨æ›´æ–°

3. **å­—ä½“å˜ä½“æ”¯æŒ**
   - ç²—ä½“ / æ–œä½“ / ç²—æ–œä½“
   - å­—é‡é€‰æ‹© (100-900)

**æŠ€æœ¯æ–¹æ¡ˆ**:

**å‰ç«¯ç»„ä»¶**:
```typescript
// react/src/components/font/FontLibrary.tsx
interface Font {
  id: string
  name: string
  family: string
  variants: string[]  // ['regular', 'bold', 'italic']
  weights: number[]   // [100, 400, 700, 900]
  category: 'serif' | 'sans-serif' | 'handwriting' | 'display'
  source: 'system' | 'custom' | 'google'
}

export function FontLibrary() {
  const [fonts, setFonts] = useState<Font[]>([])
  const [category, setCategory] = useState<string>('all')

  // Google Fonts API é›†æˆ
  useEffect(() => {
    fetch('https://www.googleapis.com/webfonts/v1/webfonts?key=API_KEY')
      .then(res => res.json())
      .then(data => {
        setFonts(data.items.map(font => ({
          id: font.family,
          name: font.family,
          variants: font.variants,
          source: 'google'
        })))
      })
  }, [])

  return (
    <div>
      <FontCategoryFilter value={category} onChange={setCategory} />
      <FontGrid fonts={fonts.filter(f => category === 'all' || f.category === category)} />
    </div>
  )
}
```

**åç«¯ API**:
```python
# server/routers/font_router.py
@router.get("/api/fonts/google")
async def list_google_fonts(category: Optional[str] = None):
    """è·å– Google Fonts åˆ—è¡¨"""
    response = await httpx.get(
        "https://www.googleapis.com/webfonts/v1/webfonts",
        params={"key": GOOGLE_FONTS_API_KEY, "sort": "popularity"}
    )
    fonts = response.json()["items"]

    if category:
        fonts = [f for f in fonts if f["category"] == category]

    return {"fonts": fonts}

@router.post("/api/fonts/install")
async def install_google_font(family: str):
    """å®‰è£… Google Font åˆ°æœ¬åœ°"""
    # ä¸‹è½½å­—ä½“æ–‡ä»¶
    font_files = await download_google_font(family)

    # ä¿å­˜åˆ° user_data/fonts/
    for file in font_files:
        await save_font(file)

    return {"success": True, "family": family}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… å­—ä½“åˆ†ç±»æµè§ˆ
- âœ… Google Fonts åœ¨çº¿å®‰è£…
- âœ… å­—ä½“å˜ä½“åˆ‡æ¢
- âœ… å­—é‡é€‰æ‹© (100-900)

**é¢„è®¡å·¥ä½œé‡**: 24 å°æ—¶ (3 å¤©)

---

##### 2.4 æµ‹è¯•è¦†ç›–ç‡æå‡ (ä¼˜å…ˆçº§: P2)

**å½“å‰çŠ¶æ€**:
- å‰ç«¯: <5%
- åç«¯: <10%

**ç›®æ ‡**:
- å‰ç«¯: 40%
- åç«¯: 60%

**æµ‹è¯•é‡ç‚¹**:

1. **åç«¯å•å…ƒæµ‹è¯•**
   - API è·¯ç”±æµ‹è¯• (FastAPI TestClient)
   - æœåŠ¡å±‚æµ‹è¯• (Mock æ•°æ®åº“)
   - LangGraph æ™ºèƒ½ä½“æµ‹è¯•

2. **å‰ç«¯ç»„ä»¶æµ‹è¯•**
   - React Testing Library
   - ç”»å¸ƒäº¤äº’æµ‹è¯•
   - WebSocket æ¶ˆæ¯æµ‹è¯•

3. **é›†æˆæµ‹è¯•**
   - ç«¯åˆ°ç«¯æµ‹è¯• (Playwright)
   - AI ç”Ÿæˆæµç¨‹æµ‹è¯•

**æµ‹è¯•æ¡†æ¶**:
```python
# tests/test_chat_service.py
import pytest
from services.chat_service import chat_service

@pytest.mark.asyncio
async def test_gemini_auto_switch():
    """æµ‹è¯•è‡ªåŠ¨åˆ‡æ¢åˆ° Gemini æ¨¡å‹"""
    result = await chat_service.handle_chat({
        'messages': [{'role': 'user', 'content': 'ç”Ÿæˆä¸€å¼ å›¾ç‰‡'}],
        'text_model': {'provider': 'openai'}  # æ— æ•ˆçš„ provider
    })

    # éªŒè¯è‡ªåŠ¨åˆ‡æ¢åˆ° Gemini
    assert result['model_used'] == 'gemini-2.5-flash'
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•è¦†ç›–ç‡ > 60%
- âœ… CI/CD é›†æˆ (GitHub Actions)
- âœ… æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

**é¢„è®¡å·¥ä½œé‡**: 32 å°æ—¶ (4 å¤©)

---

#### ğŸ“Š Phase 2 æ€»ç»“

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|--------|--------|--------|------|
| è§†é¢‘ç¼–è¾‘å™¨ | P0 | 40h (2å‘¨) | å‰ç«¯+åç«¯ | ğŸ“‹ å¾…å¼€å§‹ |
| æ™ºèƒ½æ’ç‰ˆä¼˜åŒ– | P1 | 16h (2å¤©) | åç«¯ | ğŸ“‹ å¾…å¼€å§‹ |
| å­—ä½“ç®¡ç†å®Œå–„ | P1 | 24h (3å¤©) | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |
| æµ‹è¯•è¦†ç›–ç‡æå‡ | P2 | 32h (4å¤©) | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |

**æ€»å·¥ä½œé‡**: 112 å°æ—¶ (çº¦ 4 å‘¨)

**é¢„æœŸå‘å¸ƒæ—¥æœŸ**: 2025-12-20

---

### Phase 3: åä½œä¸æ€§èƒ½ (2025-12-21 ~ 2026-01-31)

**ç‰ˆæœ¬**: v1.2.0

#### ğŸ¯ æ ¸å¿ƒç›®æ ‡
å®ç°å¤šäººåä½œç¼–è¾‘ã€æ€§èƒ½ä¼˜åŒ–ã€æ’ä»¶ç³»ç»ŸåŸºç¡€ã€‚

---

#### ğŸ“Œ ä»»åŠ¡æ¸…å•

##### 3.1 åä½œç¼–è¾‘ (ä¼˜å…ˆçº§: P0)

**ç›®æ ‡**: å¤šäººå®æ—¶åä½œç¼–è¾‘ç”»å¸ƒ

**åŠŸèƒ½éœ€æ±‚**:

1. **å®æ—¶åŒæ­¥**
   - æ“ä½œåŒæ­¥ (æ‹–æ‹½/ç¼©æ”¾/æ—‹è½¬)
   - å…‰æ ‡ä½ç½®æ˜¾ç¤º
   - åœ¨çº¿ç”¨æˆ·åˆ—è¡¨

2. **å†²çªè§£å†³**
   - Operational Transformation (OT)
   - æˆ– CRDT (Conflict-free Replicated Data Type)

3. **æƒé™ç®¡ç†**
   - ç”»å¸ƒæ‰€æœ‰è€… / ç¼–è¾‘è€… / æŸ¥çœ‹è€…
   - é‚€è¯·é“¾æ¥ç”Ÿæˆ
   - æƒé™æ’¤é”€

4. **æ“ä½œå†å²**
   - æ—¶é—´æ—…è¡Œ (Undo/Redo)
   - æ“ä½œè®°å½•æŸ¥çœ‹
   - ç‰ˆæœ¬å¿«ç…§

**æŠ€æœ¯æ–¹æ¡ˆ**:

**æ–¹æ¡ˆ 1**: Y.js (CRDT) - æ¨è
```typescript
// Y.js æ˜¯åä½œç¼–è¾‘çš„é»„é‡‘æ ‡å‡†
import * as Y from 'yjs'
import { WebsocketProvider } from 'y-websocket'

// åˆ›å»ºå…±äº«æ–‡æ¡£
const ydoc = new Y.Doc()
const ycanvas = ydoc.getMap('canvas')

// WebSocket åŒæ­¥
const provider = new WebsocketProvider(
  'ws://localhost:3004',
  'canvas-123',
  ydoc
)

// ç›‘å¬å˜åŒ–
ycanvas.observe(event => {
  console.log('Canvas updated:', event.changes)
})

// æ›´æ–°ç”»å¸ƒ
ycanvas.set('elements', elements)
```

**æ–¹æ¡ˆ 2**: ShareDB (OT)
```typescript
// ShareDB åŸºäº Operational Transformation
import ShareDB from 'sharedb/lib/client'
import WebSocket from 'ws'

const socket = new WebSocket('ws://localhost:3004')
const connection = new ShareDB.Connection(socket)

// è®¢é˜…ç”»å¸ƒæ–‡æ¡£
const doc = connection.get('canvases', 'canvas-123')
doc.subscribe(err => {
  if (err) throw err
  console.log('Canvas data:', doc.data)
})

// æ›´æ–°ç”»å¸ƒ
doc.submitOp([{ p: ['elements', 0, 'x'], na: 10 }])  // ç§»åŠ¨å…ƒç´ 
```

**åç«¯å®ç°**:
```python
# server/services/collab_service.py
from ypy import YDoc
import asyncio

class CollabService:
    def __init__(self):
        self.rooms = {}  # {canvas_id: YDoc}

    async def join_room(self, canvas_id: str, user_id: str):
        """ç”¨æˆ·åŠ å…¥åä½œæˆ¿é—´"""
        if canvas_id not in self.rooms:
            self.rooms[canvas_id] = YDoc()

        # è¿”å›å½“å‰æ–‡æ¡£çŠ¶æ€
        return self.rooms[canvas_id].get_state()

    async def sync_update(self, canvas_id: str, update: bytes):
        """åŒæ­¥æ–‡æ¡£æ›´æ–°"""
        ydoc = self.rooms[canvas_id]
        ydoc.apply_update(update)

        # å¹¿æ’­ç»™æˆ¿é—´å†…æ‰€æœ‰ç”¨æˆ·
        await self.broadcast_to_room(canvas_id, update)
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… 2+ ç”¨æˆ·åŒæ—¶ç¼–è¾‘ä¸å†²çª
- âœ… å»¶è¿Ÿ < 200ms
- âœ… æ”¯æŒ Undo/Redo
- âœ… æƒé™ç®¡ç†æ­£å¸¸

**é¢„è®¡å·¥ä½œé‡**: 60 å°æ—¶ (2 å‘¨)

---

##### 3.2 æ€§èƒ½ä¼˜åŒ– (ä¼˜å…ˆçº§: P0)

**ç›®æ ‡**: å¤§ç”»å¸ƒ (1000+ å…ƒç´ ) æµç•…ç¼–è¾‘

**ä¼˜åŒ–æ–¹å‘**:

1. **è™šæ‹ŸåŒ–æ¸²æŸ“**
   - åªæ¸²æŸ“å¯è§åŒºåŸŸ
   - æ‡’åŠ è½½å›¾å±‚

2. **Canvas ä¼˜åŒ–**
   - ç¦»å±æ¸²æŸ“
   - è„åŒºåŸŸé‡ç»˜

3. **æ•°æ®åº“ä¼˜åŒ–**
   - ç´¢å¼•ä¼˜åŒ–
   - æ‰¹é‡æŸ¥è¯¢
   - Redis ç¼“å­˜

4. **å‰ç«¯æ‰“åŒ…ä¼˜åŒ–**
   - ä»£ç åˆ†å‰²
   - æ‡’åŠ è½½è·¯ç”±
   - Tree Shaking

**æŠ€æœ¯æ–¹æ¡ˆ**:

**è™šæ‹ŸåŒ–æ¸²æŸ“**:
```typescript
// react/src/components/canvas/VirtualizedCanvas.tsx
import { FixedSizeList } from 'react-window'

export function VirtualizedLayerList({ layers }) {
  const Row = ({ index, style }) => (
    <div style={style}>
      <LayerItem layer={layers[index]} />
    </div>
  )

  return (
    <FixedSizeList
      height={600}
      itemCount={layers.length}
      itemSize={50}
      width="100%"
    >
      {Row}
    </FixedSizeList>
  )
}
```

**Canvas ç¦»å±æ¸²æŸ“**:
```typescript
// ç¼“å­˜å¤æ‚å›¾å±‚åˆ°ç¦»å± Canvas
const offscreenCanvas = new OffscreenCanvas(width, height)
const ctx = offscreenCanvas.getContext('2d')

// é¢„æ¸²æŸ“å¤æ‚å…ƒç´ 
ctx.drawImage(complexElement, 0, 0)

// ä¸» Canvas åªç»˜åˆ¶ç¼“å­˜
mainCtx.drawImage(offscreenCanvas, x, y)
```

**æ•°æ®åº“ç´¢å¼•**:
```sql
-- ç”»å¸ƒæŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_canvases_user_id_updated ON canvases(user_id, updated_at DESC);

-- æ¶ˆæ¯æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX idx_messages_session_created ON messages(session_id, created_at);
```

**Redis ç¼“å­˜**:
```python
# server/services/cache_service.py
import redis.asyncio as redis

class CacheService:
    def __init__(self):
        self.redis = redis.from_url("redis://localhost:6379")

    async def get_canvas(self, canvas_id: str):
        """ä»ç¼“å­˜è·å–ç”»å¸ƒ"""
        cached = await self.redis.get(f"canvas:{canvas_id}")
        if cached:
            return json.loads(cached)

        # ç¼“å­˜æœªå‘½ä¸­,ä»æ•°æ®åº“åŠ è½½
        canvas = await db_service.get_canvas(canvas_id)
        await self.redis.setex(
            f"canvas:{canvas_id}",
            3600,  # 1å°æ—¶è¿‡æœŸ
            json.dumps(canvas)
        )
        return canvas
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… 1000+ å…ƒç´ ç”»å¸ƒ FPS > 30
- âœ… é¦–å±åŠ è½½æ—¶é—´ < 2s
- âœ… å†…å­˜å ç”¨ < 500MB

**é¢„è®¡å·¥ä½œé‡**: 40 å°æ—¶ (1 å‘¨)

---

##### 3.3 æ’ä»¶ç³»ç»ŸåŸºç¡€ (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶æ‰©å±•

**åŠŸèƒ½éœ€æ±‚**:

1. **æ’ä»¶åŠ è½½å™¨**
   - æ’ä»¶å‘ç°å’Œå®‰è£…
   - æ²™ç®±ç¯å¢ƒ (iframe)
   - æƒé™ç®¡ç†

2. **æ’ä»¶ API**
   - ç”»å¸ƒæ“ä½œ API
   - UI æ‰©å±• API
   - äº‹ä»¶ç›‘å¬ API

3. **æ’ä»¶å¸‚åœº (MVP)**
   - æ’ä»¶åˆ—è¡¨
   - å®‰è£…/å¸è½½
   - è¯„åˆ†å’Œè¯„è®º

**æŠ€æœ¯æ–¹æ¡ˆ**:

**æ’ä»¶æ¥å£å®šä¹‰**:
```typescript
// react/src/plugins/plugin-api.ts
export interface Plugin {
  id: string
  name: string
  version: string

  // æ’ä»¶ç”Ÿå‘½å‘¨æœŸ
  onLoad(): void
  onUnload(): void

  // å·¥å…·æ æŒ‰é’®
  toolbar?: {
    icon: string
    label: string
    onClick(): void
  }

  // å³é”®èœå•
  contextMenu?: {
    label: string
    onClick(element: Element): void
  }

  // ç”»å¸ƒæ“ä½œ API
  canvas: {
    getElements(): Element[]
    addElement(element: Element): void
    updateElement(id: string, props: Partial<Element>): void
    deleteElement(id: string): void
  }
}
```

**æ’ä»¶åŠ è½½å™¨**:
```typescript
// react/src/plugins/PluginLoader.ts
export class PluginLoader {
  private plugins = new Map<string, Plugin>()

  async loadPlugin(url: string) {
    // åœ¨ iframe æ²™ç®±ä¸­åŠ è½½æ’ä»¶
    const iframe = document.createElement('iframe')
    iframe.sandbox.add('allow-scripts')
    iframe.src = url

    // é€šè¿‡ postMessage é€šä¿¡
    window.addEventListener('message', event => {
      if (event.data.type === 'plugin-ready') {
        this.registerPlugin(event.data.plugin)
      }
    })
  }

  registerPlugin(plugin: Plugin) {
    this.plugins.set(plugin.id, plugin)
    plugin.onLoad()
  }
}
```

**ç¤ºä¾‹æ’ä»¶**:
```typescript
// plugins/export-pdf/index.ts
import { Plugin } from '@jaaz/plugin-api'

export default class ExportPDFPlugin implements Plugin {
  id = 'export-pdf'
  name = 'Export to PDF'
  version = '1.0.0'

  toolbar = {
    icon: 'ğŸ“„',
    label: 'Export PDF',
    onClick: async () => {
      const elements = this.canvas.getElements()
      const pdf = await generatePDF(elements)
      downloadFile(pdf, 'canvas.pdf')
    }
  }

  onLoad() {
    console.log('PDF Export Plugin loaded')
  }

  onUnload() {
    console.log('PDF Export Plugin unloaded')
  }
}
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… åŠ è½½å®˜æ–¹ç¤ºä¾‹æ’ä»¶
- âœ… æ’ä»¶æ²™ç®±éš”ç¦»
- âœ… æ’ä»¶ API æ–‡æ¡£å®Œæ•´

**é¢„è®¡å·¥ä½œé‡**: 48 å°æ—¶ (1.5 å‘¨)

---

#### ğŸ“Š Phase 3 æ€»ç»“

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|--------|--------|--------|------|
| åä½œç¼–è¾‘ | P0 | 60h (2å‘¨) | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |
| æ€§èƒ½ä¼˜åŒ– | P0 | 40h (1å‘¨) | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |
| æ’ä»¶ç³»ç»ŸåŸºç¡€ | P1 | 48h (1.5å‘¨) | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |

**æ€»å·¥ä½œé‡**: 148 å°æ—¶ (çº¦ 4.5 å‘¨)

**é¢„æœŸå‘å¸ƒæ—¥æœŸ**: 2026-01-31

---

### Phase 4: ä¼ä¸šç‰ˆä¸ç§»åŠ¨ç«¯ (2026-02-01 ~ 2026-03-31)

**ç‰ˆæœ¬**: v2.0.0

#### ğŸ¯ æ ¸å¿ƒç›®æ ‡
ä¼ä¸šçº§åŠŸèƒ½ã€ç§»åŠ¨ç«¯é€‚é…ã€æ€§èƒ½ç›‘æ§ã€‚

---

#### ğŸ“Œ ä»»åŠ¡æ¸…å•

##### 4.1 ä¼ä¸šç‰ˆåŠŸèƒ½ (ä¼˜å…ˆçº§: P0)

**åŠŸèƒ½éœ€æ±‚**:

1. **SSO å•ç‚¹ç™»å½•**
   - SAML 2.0
   - OIDC (OpenID Connect)
   - LDAP / Active Directory

2. **å®¡è®¡æ—¥å¿—**
   - ç”¨æˆ·æ“ä½œè®°å½•
   - API è°ƒç”¨æ—¥å¿—
   - ç™»å½•å†å²

3. **ç§æœ‰éƒ¨ç½²**
   - Docker Compose
   - Kubernetes Helm Chart
   - ç¦»çº¿å®‰è£…åŒ…

4. **SLA ä¿éšœ**
   - 99.9% å¯ç”¨æ€§
   - æ•°æ®å¤‡ä»½å’Œæ¢å¤
   - ç¾éš¾æ¢å¤è®¡åˆ’

**é¢„è®¡å·¥ä½œé‡**: 80 å°æ—¶ (2.5 å‘¨)

---

##### 4.2 ç§»åŠ¨ç«¯é€‚é… (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: iPad / Android å¹³æ¿æ”¯æŒ

**åŠŸèƒ½éœ€æ±‚**:

1. **å“åº”å¼å¸ƒå±€**
   - é€‚é… 7-13 è‹±å¯¸å±å¹•
   - è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ

2. **ç§»åŠ¨ç«¯ä¼˜åŒ–**
   - æ‡’åŠ è½½ä¼˜åŒ–
   - ç¦»çº¿ç¼“å­˜
   - ä½å¸¦å®½æ¨¡å¼

3. **PWA æ”¯æŒ**
   - Service Worker
   - æ·»åŠ åˆ°ä¸»å±å¹•
   - æ¨é€é€šçŸ¥

**é¢„è®¡å·¥ä½œé‡**: 60 å°æ—¶ (2 å‘¨)

---

##### 4.3 æ€§èƒ½ç›‘æ§ (ä¼˜å…ˆçº§: P2)

**ç›®æ ‡**: å…¨é“¾è·¯æ€§èƒ½ç›‘æ§

**åŠŸèƒ½éœ€æ±‚**:

1. **APM (åº”ç”¨æ€§èƒ½ç›‘æ§)**
   - Sentry é”™è¯¯è¿½è¸ª
   - Prometheus æŒ‡æ ‡æ”¶é›†
   - Grafana å¯è§†åŒ–

2. **ç”¨æˆ·è¡Œä¸ºåˆ†æ**
   - Umami / PostHog
   - çƒ­åŠ›å›¾
   - ä¼šè¯å›æ”¾

**é¢„è®¡å·¥ä½œé‡**: 40 å°æ—¶ (1 å‘¨)

---

#### ğŸ“Š Phase 4 æ€»ç»“

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|--------|--------|--------|------|
| ä¼ä¸šç‰ˆåŠŸèƒ½ | P0 | 80h (2.5å‘¨) | å…¨æ ˆ | ğŸ“‹ å¾…å¼€å§‹ |
| ç§»åŠ¨ç«¯é€‚é… | P1 | 60h (2å‘¨) | å‰ç«¯ | ğŸ“‹ å¾…å¼€å§‹ |
| æ€§èƒ½ç›‘æ§ | P2 | 40h (1å‘¨) | åç«¯ | ğŸ“‹ å¾…å¼€å§‹ |

**æ€»å·¥ä½œé‡**: 180 å°æ—¶ (çº¦ 5.5 å‘¨)

**é¢„æœŸå‘å¸ƒæ—¥æœŸ**: 2026-03-31

---

## ğŸ“Š æ€»ä½“æ—¶é—´çº¿

```
2025-11-14 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2026-03-31
    â”‚                             â”‚
    â”œâ”€ Phase 1: ç¨³å®šæ€§ (3å¤©)
    â”‚   â””â”€ v1.0.31 å‘å¸ƒ
    â”‚
    â”œâ”€ Phase 2: åŠŸèƒ½å®Œå–„ (4å‘¨)
    â”‚   â””â”€ v1.1.0 å‘å¸ƒ
    â”‚
    â”œâ”€ Phase 3: åä½œä¸æ€§èƒ½ (4.5å‘¨)
    â”‚   â””â”€ v1.2.0 å‘å¸ƒ
    â”‚
    â””â”€ Phase 4: ä¼ä¸šç‰ˆ (5.5å‘¨)
        â””â”€ v2.0.0 å‘å¸ƒ
```

**æ€»å·¥ä½œé‡**: 462 å°æ—¶ (çº¦ 58 ä¸ªå·¥ä½œæ—¥)

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- âœ… æµ‹è¯•è¦†ç›–ç‡ > 60%
- âœ… æ ¸å¿ƒåŠŸèƒ½ Bug < 5 ä¸ª
- âœ… æ€§èƒ½å¾—åˆ† > 90/100
- âœ… ä»£ç è´¨é‡è¯„çº§ > B

### ç”¨æˆ·æŒ‡æ ‡
- âœ… æœˆæ´»ç”¨æˆ· > 10,000
- âœ… ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5.0
- âœ… ä»˜è´¹è½¬åŒ–ç‡ > 5%
- âœ… ç”¨æˆ·ç•™å­˜ç‡ > 40%

---

*æœ€åæ›´æ–°: 2025-11-13*
